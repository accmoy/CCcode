<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人注册</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="css/register.css">
</head>
<body>
    <div class="w">
        <header>
            <div class="logo">
                <a href="#">
                    <img src="images/logo.png" alt="">
                </a>
            </div>
        </header>
        <div class="registerarea">
            <h3>注册新用户
                <div class="login">
                    我有账号，去<a href="login.html">登录</a>
                </div>
            </h3>
            <div class="reg_form">
                <form action="">
                    <ul>
                        <li><label for="">手机号：</label> <input type="tel" class="inp" name="phone"> 
                            <span><i></i></span></li>
                        <li><label for="">短信验证码：</label> <input type="text" class="inp" name="message"> 
                                <span><i></i></span>
                            <a href="javascript:;" class="code">发送验证码</a>
                            </li>
                        <li><label for="">登录密码：
                            <img src="./images/不显示密码.png" alt="" id="eye">
                        </label> <input type="password" class="inp" name="password"> 
                                    <span><i class="error_icon"></i></span></li>
                        <li class="safe">安全程度 <em class="ruo">弱</em> <em class="zhong">中</em> <em class="qiang">强</em></li>
                        <li><label for="">确认密码：
                            <img src="./images/不显示密码.png" alt="" id="eye">
                        </label> <input type="password" class="inp" name="comfirm"> 
                                        <span><i class="error_icon"></i></span></li>
                        <li class="agree"><input type="checkbox" name="agree">同意协议并注册
                        <a href="#">《知晓用户协议》</a></li>
                        <li>
                            <input type="submit" value="完成注册" class="sub">
                        </li>
                    </ul>
                </form>
            </div>
        </div>
        <footer>
            <div class="mod_copyright">
                <div class="links">
                    <a href="#">关于我们</a> | <a href="#">联系我们</a> | <a href="#">联系客服</a> | <a href="#">商家入驻</a> | <a href="#">营销中心</a> | <a href="#">手机品优购</a> | <a href="#">友情链接 </a>
                    | <a href="#">销售联盟</a> | <a href="#">品优购社区</a>| <a href="#">品优购公益 </a>| <a href="#">English Site</a> | <a href="#">Contact U</a>
                </div>
                <div class="copyright">
                    地址：北京市昌平区建材城西路金燕龙办公楼一层 邮编：100096 电话：400-618-4000 传真：010-82935100 邮箱: zhanghj+itcast.cn <br>
京ICP备08001421号京公网安备110108007702
                </div>
            </div>
        </footer>
    </div>
    <script>
        const phone = document.querySelector('[name=phone]');
        const message = document.querySelector('[name=message]')
        const password = document.querySelector('[name=password]')
        const confirm = document.querySelector('[name=comfirm]')
        const agree = document.querySelector('[name=agree]')
        phone.addEventListener('change', verifyPhone);
        function verifyPhone() {
            const span = phone.nextElementSibling;
            const reg = /^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/
            if(!reg.test(phone.value)) {
                span.className = 'error';
                span.innerHTML = '手机号码格式不正确，请重新输入';
                return false
            }
            span.innerHTML = ''
            return true;
        }
        message.addEventListener('change', verifyMessage);
        function verifyMessage() {
            const span = message.nextElementSibling;
            const reg = /^\d{6}$/
            if(!reg.test(message.value)) {
                span.className = 'error';
                span.innerHTML = '验证码错误'
                return false
            }
            span.innerHTML = ''
            return true;
        }
        password.addEventListener('change', verifypassword);
        function verifypassword() {
            const span = password.nextElementSibling;
            const reg = /^[a-zA-Z0-9-_]{6,20}$/
            if(!reg.test(password.value)) {
                span.className = 'error';
                span.innerHTML = '密码格式错误，6~20位数字字母符号组成'
                return false
            }
            span.innerHTML = ''
            return true;
        }
        confirm.addEventListener('change', verifyConfirm)
    // 6.3 verifyPhone
    function verifyConfirm() {
      // console.log(11)
      const span = confirm.nextElementSibling
      // 6.4 当前表单的值不等于 密码框的值就是错误的
      if (confirm.value !== password.value) {
        // console.log(11)
        span.className = 'error';
        span.innerText = '两次密码输入不一致'
        return false
      }
      // 6.5 合法的 就清空span
      span.innerText = ''
      return true
    }
    const form = document.querySelector('form');
    form.addEventListener('submit',function(e) {
        if(!agree.checked) {
            alert('请勾选同意协议');
            e.preventDefault();
        }
        if(!verifyPhone()) e.preventDefault()
        if(!verifyMessage()) e.preventDefault()
        if(!verifypassword()) e.preventDefault()
        if(!verifyConfirm()) e.preventDefault()
    })
    const eye = document.getElementById('eye');
    let flag = 0;
    eye.addEventListener('click', function() {
        if(flag === 0) {
            password.type = 'text';
            eye.src = './images/显示密码.png';
            flag = 1;
        } else {
            password.type = 'password';
            eye.src = './images/不显示密码.png';
            flag = 0;
        }
    })
    </script>
</body>
</html>